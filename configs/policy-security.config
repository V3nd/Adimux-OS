# === Adimux OS: security-first policy ===

# KSPP hardening
CONFIG_HARDENED_USERCOPY=y
CONFIG_FORTIFY_SOURCE=y
CONFIG_STACKPROTECTOR_STRONG=y
CONFIG_INIT_STACK_ALL_ZERO=y
CONFIG_INIT_ON_ALLOC_DEFAULT_ON=y
CONFIG_INIT_ON_FREE_DEFAULT_ON=y
CONFIG_SLAB_FREELIST_HARDENED=y
CONFIG_SLAB_FREELIST_RANDOM=y
CONFIG_REFCOUNT_FULL=y
CONFIG_VMAP_STACK=y
CONFIG_STRICT_KERNEL_RWX=y
CONFIG_STRICT_MODULE_RWX=y
CONFIG_RANDOMIZE_BASE=y

# Speculation mitigations
CONFIG_MITIGATION_ITS=y
CONFIG_MITIGATION_TSA=y
CONFIG_SPECULATION_MITIGATIONS=y

# Disable debug / attack surface
CONFIG_DEBUG_KERNEL=n
CONFIG_DEBUG_FS=n
CONFIG_KPROBES=n
CONFIG_FTRACE=n
CONFIG_KCOV=n
CONFIG_BPF_SYSCALL=n
CONFIG_DEVKMEM=n
CONFIG_LEGACY_PTYS=n
CONFIG_KEXEC=n
